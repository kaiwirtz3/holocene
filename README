-------------------------------------------------------
MATLAB and R-scripts for the analysis of
 archaeological C14 and paleo-climate proxy data
 kai wirtz (Hereon) Dec 2023
-------------------------------------------------------

Code and data availability:
https://github.com/kaiwirtz3/holocene

The MATLAB and R code enables standalone or parallel processing.
For example, parallel processing of dingle patch jobs can be invoked on HPC by "sbatch --array=1-64 slurm.sh"

Requirenments:
  MATLAB
   including packages 'M_MAP' and 'pca_toolbox';
   insert/correct installation path in 'addpath('~/tools/m_map')' found in the header of some MATLAB-scripts, or 'addpath('~/tools/pca_toolbox')' in proxy_dtw.m

  R
   including libraries (rworldmap,rcarbon,R.matlab,RColorBrewer,sp)
   for rcarbon version <1.5 see comments in grid_growth.r ("spweights")

Input data
  collected radiocarbon dates for Europe at a coarse grid in c14mat/C14_europe_[1-64].mat
   radiocarbon dates for Europe pooled in  c14mat/C14_europe.mat
   radiocarbon dates for East Asia pooled in  c14mat/C14_EA.mat
  collected paleoclimate proxy time-series and meta-info in
    paleoclim/InEur_27_920.mat : index ('InEur') to proxies in EU domain
    paleoclim/proxydescription_488_0_11.00_1.70.mat % struct evinfo

Execution:
-------------
all scripts can be invoked by a single master shell command: "./master.sh"

for running R-scripts (e.g."r-example.r"):    start 'R' terminal and type 'source("r-example.r")'
                                              or from bash terminal, type  'Rscript r-example.r'
for running MATLAB-scripts (e.g."m-example.m"): start MATLAB terminal and type 'm-example'
                                              or from bash terminal, type  'matlab -nodesktop -r "try; m-example; catch; end; quit" '
-------------
sequence of script execution  and dependencies (see also master.sh)

grid_growth.r
collect.r
cluster.r
make_grid.m (uses cl_distance.m, make_grid_regions.m)

spd_growth.r (uses movavg.r)
 # reads PrePop_ clusti2 writes AllPop for time slices
# pooled method
spd_all.r #reads C14_p3k14c_europe_neo, writes AllPop3'_all

# collects RGR from time slices
plot_ContRGR %reads AllPop_i writes AllPop_tag_all avg_rgr_ (avg_rgr_all all major methods)  RGR_MethComp.png

# plot map with proxy locations and occupation boxes
plot_sites

plot_varmap_slice %reads AllPop_i

# plots and saves regional RGR ; e.g., writes Ire_rgr
extract_rgr

# calculates occupation density
occdens  # reads individual data files from data/.. (load_occ.m) ; writes OccTable_%d.tex, archoccdens

# -------------------------------------
# process climate proxy data
proxy_dtw  # applies DTW writes dtw_proxydata
## pca_proxydata #

LICENSE
-------
If not stated otherwise, the entire model software is licensed under
  the GNU Public License version 3 or later.
  See <http://www.gnu.org/licenses/gpl-3.0.txt>
  for the complete terms of the license.

Documentation:
--------------
